{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/pixabay-api.js","../src/js/modal-options.js","../src/js/render-functions.js","../src/js/css-loader.js","../src/js/load-more-btn.js","../src/js/iziToast-messages.js","../src/js/form-events.js","../src/main.js"],"sourcesContent":["export const refs = {\n  gallery: document.querySelector('.gallery'),\n  form: document.querySelector('.form'),\n  formInput: document.querySelector('.form-input'),\n  btn: document.querySelector('.button'),\n  container: document.querySelector('.container'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n  cssLoader: document.querySelector('#span-loader'),\n};\n","import axios from 'axios';\n\nexport async function getPixabayImages(inputValue, page) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const PIXAPAY_KEY = '?key=42339224-5f1cb7b0c825234adabadbe9d';\n  const url = `${BASE_URL}${PIXAPAY_KEY}`;\n  const params = {\n    q: `${inputValue}`,\n    imageType: 'photo',\n    orientation: 'horizontal',\n    safeSearch: 'true',\n    page,\n    per_page: 15,\n  };\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","export const modalOptions = {\n  captionsData: 'alt',\n  captionDelay: 250,\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { refs } from './refs';\nimport { modalOptions } from './modal-options';\n\nfunction photoTemplate(data) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = data;\n  return `\n  <li class=\"gallery-item\">\n    <a href=\"${largeImageURL}\">\n      <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n    </a>\n    <div class=\"text\">\n      <p><b>Likes: </b>${likes}</p>\n      <p><b>Views: </b>${views}</p>\n      <p><b>Comments: </b>${comments}</p>\n      <p><b>Downloads: </b>${downloads}</p>\n    </div>\n  </li>`;\n}\n\nfunction photosTemplates(data) {\n  return data.map(photoTemplate).join('');\n}\n\nlet gallery;\nexport function renderMarkup(hits) {\n  if (gallery) {\n    gallery.destroy();\n  }\n  const markup = photosTemplates(hits);\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n  gallery = new SimpleLightbox('.gallery a', modalOptions);\n  gallery.refresh();\n}\n","import { refs } from './refs';\nexport function createLoader() {\n  refs.cssLoader.classList.add('loader');\n}\n\nexport function removeLoader() {\n  refs.cssLoader.classList.remove('loader');\n}\n","import { refs } from './refs';\n\nexport function hidenloadMoreBtn() {\n  refs.loadMoreBtn.classList.add('hidden');\n}\n\nexport function visibleLoadMoreBtn() {\n  refs.loadMoreBtn.classList.remove('hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function showError(message) {\n  iziToast.error({\n    position: 'topRight',\n    message,\n  });\n}\n\nexport function showInfo(message) {\n  iziToast.info({\n    position: 'topRight',\n    message,\n  });\n}\n","import { refs } from './refs';\nimport { getPixabayImages } from './pixabay-api';\nimport { renderMarkup } from './render-functions';\nimport { createLoader, removeLoader } from './css-loader';\nimport { visibleLoadMoreBtn, hidenloadMoreBtn } from './load-more-btn';\nimport { showError, showInfo } from './iziToast-messages';\n\nlet userInputValue;\nlet page;\nlet totalPhotos;\nexport async function onFormSubmit(event) {\n  event.preventDefault();\n  createLoader();\n  refs.gallery.innerHTML = '';\n  userInputValue = refs.formInput.value.trim();\n  page = 1;\n  if (!userInputValue) {\n    removeLoader();\n    hidenloadMoreBtn();\n    return showError('Form field must be filled in.');\n  }\n\n  try {\n    const data = await getPixabayImages(userInputValue, page);\n    if (data.totalHits === 0) {\n      removeLoader();\n      hidenloadMoreBtn();\n      return showInfo('Nothing found.');\n    }\n    totalPhotos = Math.ceil(data.totalHits / 15);\n    renderMarkup(data.hits);\n  } catch (error) {\n    showError(error);\n    totalPhotos = 0;\n    refs.gallery.innerHTML = '';\n  }\n\n  removeLoader();\n  checkLoadBtnVisibility();\n  refs.form.reset();\n}\n\nexport async function onLoadMoreBtnClick() {\n  createLoader();\n  page += 1;\n  const data = await getPixabayImages(userInputValue, page);\n  renderMarkup(data.hits);\n  removeLoader();\n  checkLoadBtnVisibility();\n  const height = refs.gallery.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction checkLoadBtnVisibility() {\n  if (page >= totalPhotos) {\n    hidenloadMoreBtn();\n    showInfo('We are sorry, but you have reached the end of search results.');\n  } else {\n    visibleLoadMoreBtn();\n  }\n}\n","import { refs } from './js/refs';\nimport { onFormSubmit, onLoadMoreBtnClick } from './js/form-events';\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["refs","getPixabayImages","inputValue","page","url","params","axios","modalOptions","photoTemplate","data","largeImageURL","webformatURL","tags","likes","views","comments","downloads","photosTemplates","gallery","renderMarkup","hits","markup","SimpleLightbox","createLoader","removeLoader","hidenloadMoreBtn","visibleLoadMoreBtn","showError","message","iziToast","showInfo","userInputValue","totalPhotos","onFormSubmit","event","error","checkLoadBtnVisibility","onLoadMoreBtnClick","height"],"mappings":"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"}